@page "/browser_wasm_2"

@rendermode InteractiveWebAssembly

@inject IJSRuntime JSRuntime
@inject NavigationManager NavigationManager
@inject ContainerStorage ContainerStorage

<h3>Browser Storage Step2</h3>
<br />
<br />
<b>Demo data:</b>@data
<br />
<br />
<button type="button" class="btn btn-primary" @onclick="GoNext">Next</button>
@code {
	private string data = "";

	protected override async Task OnInitializedAsync()
	{
		await base.OnInitializedAsync();
	}
	protected override async Task OnAfterRenderAsync(bool firstRender)
	{
		if (firstRender)
		{
			// data = await JSRuntime.InvokeAsync<string>("sessionStorage.getItem", "demo-data");
			data = ContainerStorage.GetMessage();
			StateHasChanged();
		}

	}
	private async Task GoNext()
	{
		await JSRuntime.InvokeVoidAsync("sessionStorage.setItem", "demo-data", data);
		NavigationManager.NavigateTo("/browser_wasm_3");
	}
}
